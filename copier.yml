# Copier template configuration for NiceGUI projects

_templates_suffix: .jinja
_answers_file: .copier-answers.yml
_skip_if_exists:
  - .vscode/launch.json

# Project metadata questions
project_name:
  type: str
  help: What is your project name?
  placeholder: my-nicegui-app

project_slug:
  type: str
  help: What is your project slug (Python package name)?
  default: "{{ project_name|lower|replace('-', '_')|replace(' ', '_') }}"

project_description:
  type: str
  help: Brief description of your project
  default: A NiceGUI application with clean architecture

author_name:
  type: str
  help: Author name
  default: Your Name

author_email:
  type: str
  help: Author email
  default: your.email@example.com

python_version:
  type: str
  help: Python version
  default: "3.11"
  choices:
    - "3.10"
    - "3.11"
    - "3.12"

use_docker:
  type: bool
  help: Include Docker configuration?
  default: true

async_task_backend:
  type: str
  help: Which backend to use for long-running async tasks?
  default: redis_rq
  choices:
    - none
    - redis_rq
    - gcp_pubsub

use_github_actions:
  type: bool
  help: Include GitHub Actions CI/CD pipeline?
  default: true

use_sqlite_db:
  type: bool
  help: Include SQLite database support with SQLAlchemy?
  default: false

use_oauth:
  type: bool
  help: Include OAuth authentication (Google/Twitter)?
  default: false

oauth_providers:
  type: str
  help: Which OAuth providers to include?
  default: both
  choices:
    - google
    - twitter
    - both
  when: "{{ use_oauth }}"

# Exclude patterns
_exclude:
  - "*.pyc"
  - "__pycache__"
  - ".git"
  - ".pytest_cache"
  - ".mypy_cache"
  - ".ruff_cache"
  - "*.egg-info"
  - ".venv"
  - "venv"
  - ".DS_Store"
  # Conditional exclusions
  - "{% if not use_docker %}docker{% endif %}"
  - "{% if not use_docker %}.devcontainer{% endif %}"
  - "{% if async_task_backend == 'none' %}src/{{ project_slug }}/application/commands_async{% endif %}"
  - "{% if async_task_backend == 'none' %}src/{{ project_slug }}/application/queries_async{% endif %}"
  - "{% if async_task_backend != 'redis_rq' %}src/{{ project_slug }}/infrastructure/rq_client{% endif %}"
  - "{% if async_task_backend != 'redis_rq' %}docker/Dockerfile.worker.jinja{% endif %}"
  - "{% if async_task_backend != 'redis_rq' %}k8s/rq-worker-deployment.yaml.jinja{% endif %}"
  - "{% if async_task_backend != 'redis_rq' %}k8s/rq-worker-hpa.yaml.jinja{% endif %}"
  - "{% if async_task_backend != 'redis_rq' %}k8s/keda-scaledobject.yaml.jinja{% endif %}"
  - "{% if async_task_backend != 'redis_rq' %}infra/terraform/redis_helm.tf.jinja{% endif %}"
  - "{% if async_task_backend != 'redis_rq' %}infra/terraform/values/redis-values.yaml.jinja{% endif %}"
  - "{% if async_task_backend != 'gcp_pubsub' %}src/{{ project_slug }}/infrastructure/pubsub_client{% endif %}"
  - "{% if async_task_backend != 'gcp_pubsub' %}docker/Dockerfile.pubsub-worker.jinja{% endif %}"
  - "{% if async_task_backend != 'gcp_pubsub' %}infra/terraform/pubsub.tf.jinja{% endif %}"
  - "{% if async_task_backend != 'gcp_pubsub' %}infra/terraform/cloud_run.tf.jinja{% endif %}"
  - "{% if async_task_backend == 'none' %}src/{{ project_slug }}/interface/components/job_monitor_component.py.jinja{% endif %}"
  - "{% if not use_github_actions %}.github{% endif %}"
  - "{% if not use_sqlite_db %}src/{{ project_slug }}/infrastructure/cache_db{% endif %}"
  - "{% if not use_oauth %}src/{{ project_slug }}/infrastructure/oauth{% endif %}"
  - "{% if not use_oauth %}src/{{ project_slug }}/interface/pages/login.py.jinja{% endif %}"
  - "{% if not use_oauth %}src/{{ project_slug }}/interface/routes/oauth_routes.py.jinja{% endif %}"
  - "{% if not use_oauth %}.env.example{% endif %}"
  - "{% if not use_oauth or oauth_providers not in ['twitter', 'both'] %}src/{{ project_slug }}/interface/pages/tweets.py.jinja{% endif %}"
